{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { successAlert } from 'app/helpers/sweetalert';\nimport { CommunitiesService } from 'app/services/communities.service';\nimport { DepartmentService } from 'app/services/department.service';\nimport { MunicipalitiesService } from 'app/services/municipalities.service';\nimport { QuestionService } from 'app/services/question.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/services/department.service\";\nimport * as i2 from \"app/services/municipalities.service\";\nimport * as i3 from \"app/services/communities.service\";\nimport * as i4 from \"app/services/question.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction MonitoringComponent_div_17_option_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", item_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r5.nameD, \" \");\n  }\n}\nfunction MonitoringComponent_div_17_option_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", item_r6.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r6.nameM, \" \");\n  }\n}\nfunction MonitoringComponent_div_17_option_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", item_r7.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r7.nameC);\n  }\n}\nfunction MonitoringComponent_div_17_fieldset_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"fieldset\")(1, \"legend\");\n    i0.ɵɵtext(2, \"Monitoreo de Organizaciones Locales\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 13)(4, \"label\", 28);\n    i0.ɵɵtext(5, \"Hola\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 29)(7, \"label\", 30);\n    i0.ɵɵelement(8, \"input\", 31);\n    i0.ɵɵtext(9, \"SI \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"label\", 30);\n    i0.ɵɵelement(11, \"input\", 32);\n    i0.ɵɵtext(12, \"NO \");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction MonitoringComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"form\", 12)(2, \"fieldset\")(3, \"div\", 13)(4, \"label\", 14);\n    i0.ɵɵtext(5, \"Fecha Monitoreo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 15)(7, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function MonitoringComponent_div_17_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.dateMonitory = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(8, \"fieldset\")(9, \"div\", 13)(10, \"label\", 14);\n    i0.ɵɵtext(11, \"Departamento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 15)(13, \"select\", 17);\n    i0.ɵɵlistener(\"change\", function MonitoringComponent_div_17_Template_select_change_13_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.getMunicipalitiesByDeparment($event));\n    });\n    i0.ɵɵelementStart(14, \"option\", 18);\n    i0.ɵɵtext(15, \"Seleccione un Departamento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, MonitoringComponent_div_17_option_16_Template, 2, 2, \"option\", 19);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(17, \"fieldset\")(18, \"div\", 13)(19, \"label\", 14);\n    i0.ɵɵtext(20, \"Municipio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 15)(22, \"select\", 20);\n    i0.ɵɵlistener(\"change\", function MonitoringComponent_div_17_Template_select_change_22_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.getMunicipalities($event));\n    });\n    i0.ɵɵelementStart(23, \"option\", 18);\n    i0.ɵɵtext(24, \"Seleccione un Municipio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(25, MonitoringComponent_div_17_option_25_Template, 2, 2, \"option\", 19);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(26, \"fieldset\")(27, \"div\", 13)(28, \"label\", 14);\n    i0.ɵɵtext(29, \"Comunidad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"div\", 15)(31, \"select\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function MonitoringComponent_div_17_Template_select_ngModelChange_31_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.communityId = $event);\n    });\n    i0.ɵɵelementStart(32, \"option\", 22);\n    i0.ɵɵtext(33, \"Seleccione un Comunidad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(34, MonitoringComponent_div_17_option_34_Template, 2, 2, \"option\", 19);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(35, MonitoringComponent_div_17_fieldset_35_Template, 13, 0, \"fieldset\", 23);\n    i0.ɵɵelementStart(36, \"fieldset\")(37, \"legend\");\n    i0.ɵɵtext(38, \"Recomendaciones\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(39, \"fieldset\")(40, \"div\", 13)(41, \"label\", 14);\n    i0.ɵɵtext(42, \"Recomendaciones\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"div\", 15);\n    i0.ɵɵelement(44, \"textarea\", 24);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(45, \"fieldset\")(46, \"div\", 25)(47, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function MonitoringComponent_div_17_Template_button_click_47_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.save());\n    });\n    i0.ɵɵtext(48, \"Guardar\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.formGroup);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.dateMonitory);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.departments);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.municipalities);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.communityId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.communities);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.loadingQuestions);\n  }\n}\nexport let MonitoringComponent = /*#__PURE__*/(() => {\n  class MonitoringComponent {\n    deparmentService;\n    municipalitiesService;\n    communitiesService;\n    questionsService;\n    departments = [];\n    municipalities = [];\n    communities = [];\n    question = [];\n    dateMonitory = \"\";\n    dataGroup = [];\n    loadingQuestions = false;\n    formGroup = new FormGroup({\n      first: new FormControl(),\n      last: new FormControl()\n    });\n    communityId = 0;\n    municipalityId = 0;\n    departmentId = 0;\n    constructor(deparmentService, municipalitiesService, communitiesService, questionsService) {\n      this.deparmentService = deparmentService;\n      this.municipalitiesService = municipalitiesService;\n      this.communitiesService = communitiesService;\n      this.questionsService = questionsService;\n    }\n    ngOnInit() {\n      //this.inicialiceTable();\n      this.getDeparments();\n      this.getQuestions();\n      //this.inicializeProperteForm();\n      //this.toFormGroup();\n      this.loadingQuestions = true;\n    }\n    ngAfterViewInitsin() {\n      this.inicializeProperteForm();\n      this.toFormGroup();\n    }\n    /*\r\n        inicialiceTable() {\r\n            //  Activate the tooltips\r\n            $('[rel=\"tooltip\"]').tooltip();\r\n    \r\n            //  Init Bootstrap Select Picker\r\n            if ($(\".selectpicker\").length != 0) {\r\n                $(\".selectpicker\").selectpicker({\r\n                    iconBase: \"fa\",\r\n                    tickIcon: \"fa-check\"\r\n                });\r\n            }\r\n    \r\n            $('.datetimepicker').datetimepicker({\r\n                icons: {\r\n                    time: \"fa fa-clock-o\",\r\n                    date: \"fa fa-calendar\",\r\n                    up: \"fa fa-chevron-up\",\r\n                    down: \"fa fa-chevron-down\",\r\n                    previous: 'fa fa-chevron-left',\r\n                    next: 'fa fa-chevron-right',\r\n                    today: 'fa fa-screenshot',\r\n                    clear: 'fa fa-trash',\r\n                    close: 'fa fa-remove'\r\n                }\r\n            });\r\n    \r\n            $('.datepicker').datetimepicker({\r\n                format: 'MM/DD/YYYY',    //use this format if you want the 12hours timpiecker with AM/PM toggle\r\n                icons: {\r\n                    time: \"fa fa-clock-o\",\r\n                    date: \"fa fa-calendar\",\r\n                    up: \"fa fa-chevron-up\",\r\n                    down: \"fa fa-chevron-down\",\r\n                    previous: 'fa fa-chevron-left',\r\n                    next: 'fa fa-chevron-right',\r\n                    today: 'fa fa-screenshot',\r\n                    clear: 'fa fa-trash',\r\n                    close: 'fa fa-remove'\r\n                }\r\n            });\r\n    \r\n            $('.timepicker').datetimepicker({\r\n                //          format: 'H:mm',    // use this format if you want the 24hours timepicker\r\n                format: 'h:mm A',    //use this format if you want the 12hours timpiecker with AM/PM toggle\r\n                icons: {\r\n                    time: \"fa fa-clock-o\",\r\n                    date: \"fa fa-calendar\",\r\n                    up: \"fa fa-chevron-up\",\r\n                    down: \"fa fa-chevron-down\",\r\n                    previous: 'fa fa-chevron-left',\r\n                    next: 'fa fa-chevron-right',\r\n                    today: 'fa fa-screenshot',\r\n                    clear: 'fa fa-trash',\r\n                    close: 'fa fa-remove'\r\n                }\r\n    \r\n            });\r\n        }\r\n    */\n    getDeparments() {\n      this.deparmentService.getAll().subscribe(res => {\n        //console.log(res);\n        this.departments = res.data;\n      });\n    }\n    getMunicipalitiesByDeparment(event) {\n      let departmentId = event.target.value;\n      this.communities = [];\n      this.municipalities = [];\n      this.departmentId = Number(departmentId);\n      this.municipalitiesService.getByDepartmentId(departmentId).subscribe(res => {\n        this.municipalities = res.data;\n      });\n    }\n    getMunicipalities(event) {\n      let municipalityId = event.target.value;\n      this.municipalityId = Number(municipalityId);\n      this.communitiesService.getByCommunityByMunicipalityId(municipalityId).subscribe(res => {\n        this.communities = res.data;\n      });\n    }\n    getQuestions() {\n      this.questionsService.getAll().subscribe(res => {\n        this.question = res.data;\n      });\n    }\n    save() {\n      console.log({\n        municipalityId: this.municipalityId,\n        departmentId: this.departmentId,\n        communityId: Number(this.communityId)\n      });\n      successAlert('Exitoso', 'Registro guardado con exito');\n    }\n    inicializeProperteForm() {\n      let data = [];\n      this.question.forEach(item => {\n        data.push({\n          questionId: item.id,\n          descripcion: item.description,\n          otherResponse: \"\",\n          key: \"questions?\" + item.id,\n          key2: \"recommendations?\" + item.id\n        });\n      });\n      this.dataGroup = [...data];\n    }\n    toFormGroup() {\n      const group = {};\n      this.formGroup.removeControl('first');\n      this.formGroup.removeControl('last');\n      this.dataGroup.forEach(question => {\n        group[question.key] = new FormControl(false, Validators.required);\n        if (question?.key2) {\n          group[question.key2] = new FormControl(\"\", Validators.required);\n        }\n      });\n      this.formGroup = new FormGroup(group);\n    }\n    static ɵfac = function MonitoringComponent_Factory(t) {\n      return new (t || MonitoringComponent)(i0.ɵɵdirectiveInject(i1.DepartmentService), i0.ɵɵdirectiveInject(i2.MunicipalitiesService), i0.ɵɵdirectiveInject(i3.CommunitiesService), i0.ɵɵdirectiveInject(i4.QuestionService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MonitoringComponent,\n      selectors: [[\"app-monitoring\"]],\n      decls: 20,\n      vars: 1,\n      consts: [[1, \"main-content\"], [1, \"content\"], [1, \"row\"], [1, \"col-md-12\"], [1, \"card\"], [1, \"header\"], [1, \"title\"], [1, \"category\"], [1, \"card-0\"], [\"class\", \"content\", 4, \"ngIf\"], [1, \"col-md-6\", \"col-md-offset-1\"], [\"id\", \"worldMap\", 2, \"height\", \"300px\"], [1, \"form-horizontal\", 3, \"formGroup\"], [1, \"form-group\"], [1, \"col-sm-2\", \"control-label\", 2, \"text-align\", \"left\"], [1, \"col-sm-10\"], [\"type\", \"date\", \"placeholder\", \"Fecha Monitoreo\", 1, \"form-control\", \"datetimepicker\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"Departamento\", 1, \"form-control\", 3, \"change\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"municipio\", \"placeholder\", \"municipio\", 1, \"form-control\", 3, \"change\"], [\"id\", \"comunidad\", \"placeholder\", \"comunidad\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"0\"], [4, \"ngIf\"], [\"rows\", \"4\", \"placeholder\", \"Ingrese sus recomendaciones aqu\\u00ED\", 1, \"form-control\", \"valid\"], [1, \"center-btn\"], [1, \"btn\", \"btn-success\", \"btn-fill\", \"btn-wd\", 3, \"click\"], [3, \"value\"], [1, \"col-sm-10\", \"control-label\", 2, \"text-align\", \"left\"], [1, \"col-sm-2\"], [1, \"radio-inline\"], [\"type\", \"radio\", \"name\", \"1545\", \"id\", \"14\", \"value\", \"true\"], [\"type\", \"radio\", \"name\", \"45\", \"id\", \"54\", \"value\", \"false\"]],\n      template: function MonitoringComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h4\", 6);\n          i0.ɵɵtext(7, \"Ficha de Monitoreo de Organizaciones Locales\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(8, \"p\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 1)(10, \"div\", 2)(11, \"div\", 3)(12, \"div\", 3)(13, \"div\", 8)(14, \"div\", 5)(15, \"legend\");\n          i0.ɵɵtext(16, \"Datos Generales\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(17, MonitoringComponent_div_17_Template, 49, 7, \"div\", 9);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(18, \"div\", 10);\n          i0.ɵɵelement(19, \"div\", 11);\n          i0.ɵɵelementEnd()()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(17);\n          i0.ɵɵproperty(\"ngIf\", ctx.loadingQuestions);\n        }\n      },\n      dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.NgModel, i6.FormGroupDirective],\n      styles: [\".center-btn[_ngcontent-%COMP%]{display:flex;justify-content:center}\"]\n    });\n  }\n  return MonitoringComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}